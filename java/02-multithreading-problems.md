# Класические задачи многопоточного прогргаммирования

## Задача доступа к общему ресурсу
Несколько потоков обращаются к общему ресурсу. Считаем, что доступ к этому ресурсу допустим только из одного потока в данный момент времени.
![](images/shared-resource.png)

Решение: синхронизация (atomic, synchronized(), synchronized collections)

## Производитель-потребитель
![](images/producer-consumer.png)

Проблемы:
* Возможна разная скорость производителей и потребителей. Если производители быстрые - возможно OutOfMemory, поэтому надо ограничивать очередь. Если потребители быстрые - они будут простаивать.
* Читать можно без синхронизации, писать - нельзя.

## Задача об обедающих философах
![](images/dining-philosophers.png)

Если каждый философ сначала берет правую вилку, то возможен deadlock.

Решение: один философ сначала берет левую вилку, потом правую. Остальные сначала берут правую.

Другая нотация: вилки занумеровали 1..n. Тогда каждый философ берет сначала вилку с меньшим номером, потом с большим.

## Задания и работники
Поток-клиент ждет выполнения потока-работника (потока-сервера)
![](images/tasks-workers.png)

Решение: задания, очередь, счетчики на пулл заданий.
